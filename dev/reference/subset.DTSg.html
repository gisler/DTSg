<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Subset time series data — subset.DTSg • DTSg</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/readable/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Subset time series data — subset.DTSg" />
<meta property="og:description" content="Filters rows and/or selects columns of a DTSg object." />


<meta name="robots" content="noindex">

<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">DTSg</a>
        <span class="version label label-danger" data-toggle="tooltip" data-placement="bottom" title="In-development version">0.8.1.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Vignettes
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/a_basicUsage.html">A. Basic usage</a>
    </li>
    <li>
      <a href="../articles/b_advancedUsage.html">B. Advanced usage</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/gisler/DTSg/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Subset time series data</h1>
    <small class="dont-index">Source: <a href='https://github.com/gisler/DTSg/blob/master/R/Swrappers.R'><code>R/Swrappers.R</code></a></small>
    <div class="hidden name"><code>subset.DTSg.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Filters rows and/or selects columns of a <code><a href='DTSg.html'>DTSg</a></code> object.</p>
    </div>

    <pre class="usage"><span class='co'># S3 method for DTSg</span>
<span class='fu'>subset</span><span class='op'>(</span>
  <span class='va'>x</span>,
  <span class='va'>i</span>,
  cols <span class='op'>=</span> <span class='va'>self</span><span class='op'>$</span><span class='fu'>cols</span><span class='op'>(</span><span class='op'>)</span>,
  funby <span class='op'>=</span> <span class='cn'>NULL</span>,
  ignoreDST <span class='op'>=</span> <span class='cn'>FALSE</span>,
  na.status <span class='op'>=</span> <span class='st'>"implicit"</span>,
  clone <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/options.html'>getOption</a></span><span class='op'>(</span><span class='st'>"DTSgClone"</span><span class='op'>)</span>,
  multiplier <span class='op'>=</span> <span class='fl'>1L</span>,
  funbyHelpers <span class='op'>=</span> <span class='cn'>NULL</span>,
  <span class='va'>...</span>
<span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>x</th>
      <td><p>A <code><a href='DTSg.html'>DTSg</a></code> object (S3 method only).</p></td>
    </tr>
    <tr>
      <th>i</th>
      <td><p>An integerish vector indexing rows (positive numbers pick and
negative numbers omit rows) or a filter expression accepted by the <code>i</code>
argument of <code><a href='https://Rdatatable.gitlab.io/data.table/reference/data.table.html'>data.table::data.table</a></code>. Filter expressions can contain the
special symbol <code><a href='https://Rdatatable.gitlab.io/data.table/reference/special-symbols.html'>.N</a></code>.</p></td>
    </tr>
    <tr>
      <th>cols</th>
      <td><p>A character vector specifying the columns to select. The
<em>.dateTime</em> column is always selected and cannot be part of it.</p></td>
    </tr>
    <tr>
      <th>funby</th>
      <td><p>One of the temporal aggregation level functions described in
<code><a href='TALFs.html'>TALFs</a></code> or a user defined temporal aggregation level function. Can be
used to, for instance, select the last two observations of a certain
temporal level. See corresponding section and examples for further
information.</p></td>
    </tr>
    <tr>
      <th>ignoreDST</th>
      <td><p>A logical specifying if day saving time shall be ignored
by <code>funby</code>. See corresponding section for further information.</p></td>
    </tr>
    <tr>
      <th>na.status</th>
      <td><p>A character string. Either <code>"explicit"</code>, which makes missing
timestamps explicit according to the recognised periodicity, or
<code>"implicit"</code>, which removes timestamps with missing values on all value
columns. See corresponding section for further information.</p></td>
    </tr>
    <tr>
      <th>clone</th>
      <td><p>A logical specifying if the object shall be modified in place or
if a deep clone (copy) shall be made beforehand.</p></td>
    </tr>
    <tr>
      <th>multiplier</th>
      <td><p>A positive integerish value &#8220;multiplying&#8221; the
temporal aggregation level of certain <code><a href='TALFs.html'>TALFs</a></code>. See corresponding section
for further information.</p></td>
    </tr>
    <tr>
      <th>funbyHelpers</th>
      <td><p>An optional <code><a href='https://rdrr.io/r/base/list.html'>list</a></code> with helper data passed on to
<code>funby</code>. See corresponding section for further information.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>Further arguments passed on to <code>fun</code>.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>Returns a <code><a href='DTSg.html'>DTSg</a></code> object.</p>
    <h2 class="hasAnchor" id="status-of-missing-values"><a class="anchor" href="#status-of-missing-values"></a>Status of missing values</h2>

    

<p>Please note that filtering rows and having or making missing timestamps
explicit equals to setting the values of all other timestamps to missing. The
default value of <code>na.status</code> is therefore <code>"implicit"</code>. To simply filter for
a consecutive range of a <code><a href='DTSg.html'>DTSg</a></code> object while leaving the <code>na.status</code>
untouched, <code><a href='alter.DTSg.html'>alter</a></code> is probably the better choice.</p>
    <h2 class="hasAnchor" id="user-defined-talfs-talfs-helper-data-and-multiplier"><a class="anchor" href="#user-defined-talfs-talfs-helper-data-and-multiplier"></a>User defined TALFs, TALFs helper data and multiplier</h2>

    

<p>User defined temporal aggregation level functions have to return a
<code><a href='https://rdrr.io/r/base/DateTimeClasses.html'>POSIXct</a></code> vector of the same length as the time series and accept two
arguments: a <code><a href='https://rdrr.io/r/base/DateTimeClasses.html'>POSIXct</a></code> vector as its first and a <code><a href='https://rdrr.io/r/base/list.html'>list</a></code> with helper data
as its second. The default elements of this <code><a href='https://rdrr.io/r/base/list.html'>list</a></code> are as follows:</p><ul>
<li><p><em>timezone:</em> Same as the <code><a href='DTSg.html'>timezone</a></code> field.</p></li>
<li><p><em>ignoreDST:</em> Same as the <code>ignoreDST</code> argument.</p></li>
<li><p><em>periodicity:</em> Same as the <code><a href='DTSg.html'>periodicity</a></code> field.</p></li>
<li><p><em>na.status:</em> Same as the <code><a href='DTSg.html'>na.status</a></code> field.</p></li>
<li><p><em>multiplier:</em> Same as the <code>multiplier</code> argument.</p></li>
</ul>

<p>Any additional element specified in the <code>funbyHelpers</code> argument is appended
to the end of the helper data <code><a href='https://rdrr.io/r/base/list.html'>list</a></code>. In case <code>funbyHelpers</code> contains an
<em>ignoreDST</em> or <em>multiplier</em> element, it takes precedence over the respective
method argument. <em>timezone, periodicity</em> and <em>na.status</em> elements are
rejected.</p>
<p>The temporal aggregation level of certain <code><a href='TALFs.html'>TALFs</a></code> can be adjusted with the
help of the <code>multiplier</code> argument. A <code>multiplier</code> of <code>10</code>, for example, makes
<code><a href='TALFs.html'>byY_____</a></code> aggregate to decades instead of years. Another example
is a <code>multiplier</code> of <code>6</code> provided to <code><a href='TALFs.html'>by_m____</a></code>. The function
then aggregates all months of all first and all months of all second half
years instead of all months of all years separately. This feature is
supported by the following <code><a href='TALFs.html'>TALFs</a></code> of the package:</p><ul>
<li><p><code><a href='TALFs.html'>byFasttimeY_____</a></code></p></li>
<li><p><code><a href='TALFs.html'>byFasttimeYm____</a></code></p></li>
<li><p><code><a href='TALFs.html'>byFasttimeYmdH__</a></code></p></li>
<li><p><code><a href='TALFs.html'>byFasttimeYmdHM_</a></code></p></li>
<li><p><code><a href='TALFs.html'>byFasttimeYmdHMS</a></code></p></li>
<li><p><code><a href='TALFs.html'>byFasttime_m____</a></code></p></li>
<li><p><code><a href='TALFs.html'>byFasttime___H__</a></code></p></li>
<li><p><code><a href='TALFs.html'>byFasttime____M_</a></code></p></li>
<li><p><code><a href='TALFs.html'>byFasttime_____S</a></code></p></li>
<li><p><code><a href='TALFs.html'>byY_____</a></code></p></li>
<li><p><code><a href='TALFs.html'>byYm____</a></code></p></li>
<li><p><code><a href='TALFs.html'>byYmdH__</a></code> (UTC and equivalent as well as all Etc/GMT time zones only)</p></li>
<li><p><code><a href='TALFs.html'>byYmdHM_</a></code></p></li>
<li><p><code><a href='TALFs.html'>byYmdHMS</a></code></p></li>
<li><p><code><a href='TALFs.html'>by_m____</a></code></p></li>
<li><p><code><a href='TALFs.html'>by___H__</a></code> (UTC and equivalent as well as all Etc/GMT time zones only)</p></li>
<li><p><code><a href='TALFs.html'>by____M_</a></code></p></li>
<li><p><code><a href='TALFs.html'>by_____S</a></code></p></li>
</ul>

    <h2 class="hasAnchor" id="ignore-day-saving-time"><a class="anchor" href="#ignore-day-saving-time"></a>Ignore day saving time</h2>

    

<p><code>ignoreDST</code> tells a temporal aggregation level function if it is supposed to
ignore day saving time while forming new timestamps. This can be a desired
feature for time series strictly following the position of the sun such as
hydrological time series. Doing so ensures that diurnal variations are
preserved by all means and all intervals are of the &#8220;correct&#8221; length,
however, a possible limitation might be that the day saving time shift is
invariably assumed to be one hour long. This feature requires that the
periodicity of the time series was recognised and is supported by the
following <code><a href='TALFs.html'>TALFs</a></code> of the package:</p><ul>
<li><p><code><a href='TALFs.html'>byY_____</a></code></p></li>
<li><p><code><a href='TALFs.html'>byYQ____</a></code></p></li>
<li><p><code><a href='TALFs.html'>byYm____</a></code></p></li>
<li><p><code><a href='TALFs.html'>byYmd___</a></code></p></li>
<li><p><code><a href='TALFs.html'>by_Q____</a></code></p></li>
<li><p><code><a href='TALFs.html'>by_m____</a></code></p></li>
<li><p><code><a href='TALFs.html'>by___H__</a></code></p></li>
</ul>

    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code><a href='cols.DTSg.html'>cols</a></code>, <code><a href='https://rdrr.io/r/base/options.html'>getOption</a></code></p></div>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'># new DTSg object</span>
<span class='va'>x</span> <span class='op'>&lt;-</span> <span class='va'><a href='DTSg.html'>DTSg</a></span><span class='op'>$</span><span class='fu'>new</span><span class='op'>(</span>values <span class='op'>=</span> <span class='va'>flow</span><span class='op'>)</span>

<span class='co'># filter for the first six observations</span>
<span class='co'>## R6 method</span>
<span class='va'>x</span><span class='op'>$</span><span class='fu'>subset</span><span class='op'>(</span>i <span class='op'>=</span> <span class='fl'>1</span><span class='op'>:</span><span class='fl'>6</span><span class='op'>)</span><span class='op'>$</span><span class='fu'>print</span><span class='op'>(</span><span class='op'>)</span>
</div><div class='output co'>#&gt; Values:
#&gt;     .dateTime  flow
#&gt;        &lt;POSc&gt; &lt;num&gt;
#&gt; 1: 2007-01-01 9.540
#&gt; 2: 2007-01-02 9.285
#&gt; 3: 2007-01-03 8.940
#&gt; 4: 2007-01-04 8.745
#&gt; 5: 2007-01-05 8.490
#&gt; 6: 2007-01-06 8.400
#&gt; 
#&gt; Aggregated:     FALSE
#&gt; Regular:        TRUE
#&gt; Periodicity:    Time difference of 1 days
#&gt; Missing values: implicit
#&gt; Time zone:      UTC
#&gt; Timestamps:     6</div><div class='input'>
<span class='co'>## S3 method</span>
<span class='fu'><a href='print.DTSg.html'>print</a></span><span class='op'>(</span><span class='fu'>subset</span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>x</span>, i <span class='op'>=</span> <span class='fl'>1</span><span class='op'>:</span><span class='fl'>6</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='output co'>#&gt; Values:
#&gt;     .dateTime  flow
#&gt;        &lt;POSc&gt; &lt;num&gt;
#&gt; 1: 2007-01-01 9.540
#&gt; 2: 2007-01-02 9.285
#&gt; 3: 2007-01-03 8.940
#&gt; 4: 2007-01-04 8.745
#&gt; 5: 2007-01-05 8.490
#&gt; 6: 2007-01-06 8.400
#&gt; 
#&gt; Aggregated:     FALSE
#&gt; Regular:        TRUE
#&gt; Periodicity:    Time difference of 1 days
#&gt; Missing values: implicit
#&gt; Time zone:      UTC
#&gt; Timestamps:     6</div><div class='input'>
<span class='co'># filter for the last two observations per year</span>
<span class='co'>## R6 method</span>
<span class='va'>x</span><span class='op'>$</span><span class='fu'>subset</span><span class='op'>(</span>
  i <span class='op'>=</span> <span class='op'>(</span><span class='va'>.N</span> <span class='op'>-</span> <span class='fl'>1</span><span class='op'>)</span><span class='op'>:</span><span class='va'>.N</span>,
  funby <span class='op'>=</span> <span class='kw'>function</span><span class='op'>(</span><span class='va'>x</span>, <span class='va'>...</span><span class='op'>)</span> <span class='op'>{</span><span class='fu'>data.table</span><span class='fu'>::</span><span class='fu'><a href='https://Rdatatable.gitlab.io/data.table/reference/IDateTime.html'>year</a></span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span><span class='op'>}</span>
<span class='op'>)</span><span class='op'>$</span><span class='fu'>print</span><span class='op'>(</span><span class='op'>)</span>
</div><div class='output co'>#&gt; Values:
#&gt;      .dateTime  flow
#&gt;         &lt;POSc&gt; &lt;num&gt;
#&gt;  1: 2007-12-30 11.49
#&gt;  2: 2007-12-31 11.61
#&gt;  3: 2008-12-30 12.54
#&gt;  4: 2008-12-31 11.94
#&gt;  5: 2009-12-30 10.11
#&gt; ---                 
#&gt;  8: 2010-12-31  9.87
#&gt;  9: 2011-12-30  8.04
#&gt; 10: 2011-12-31  7.71
#&gt; 11: 2012-12-30 18.84
#&gt; 12: 2012-12-31 17.25
#&gt; 
#&gt; Aggregated:     FALSE
#&gt; Regular:        TRUE
#&gt; Periodicity:    Time difference of 1 days
#&gt; Missing values: implicit
#&gt; Time zone:      UTC
#&gt; Timestamps:     12</div><div class='input'>
<span class='co'>## S3 method</span>
<span class='fu'><a href='print.DTSg.html'>print</a></span><span class='op'>(</span><span class='fu'>subset</span><span class='op'>(</span>
  x <span class='op'>=</span> <span class='va'>x</span>,
  i <span class='op'>=</span> <span class='op'>(</span><span class='va'>.N</span> <span class='op'>-</span> <span class='fl'>1</span><span class='op'>)</span><span class='op'>:</span><span class='va'>.N</span>,
  funby <span class='op'>=</span> <span class='kw'>function</span><span class='op'>(</span><span class='va'>x</span>, <span class='va'>...</span><span class='op'>)</span> <span class='op'>{</span><span class='fu'>data.table</span><span class='fu'>::</span><span class='fu'><a href='https://Rdatatable.gitlab.io/data.table/reference/IDateTime.html'>year</a></span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span><span class='op'>}</span>
<span class='op'>)</span><span class='op'>)</span>
</div><div class='output co'>#&gt; Values:
#&gt;      .dateTime  flow
#&gt;         &lt;POSc&gt; &lt;num&gt;
#&gt;  1: 2007-12-30 11.49
#&gt;  2: 2007-12-31 11.61
#&gt;  3: 2008-12-30 12.54
#&gt;  4: 2008-12-31 11.94
#&gt;  5: 2009-12-30 10.11
#&gt; ---                 
#&gt;  8: 2010-12-31  9.87
#&gt;  9: 2011-12-30  8.04
#&gt; 10: 2011-12-31  7.71
#&gt; 11: 2012-12-30 18.84
#&gt; 12: 2012-12-31 17.25
#&gt; 
#&gt; Aggregated:     FALSE
#&gt; Regular:        TRUE
#&gt; Periodicity:    Time difference of 1 days
#&gt; Missing values: implicit
#&gt; Time zone:      UTC
#&gt; Timestamps:     12</div><div class='input'>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Gerold Hepp.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


